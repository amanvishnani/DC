Aim:RPC subtraction program
------------sub.x-------------------
struct numbers
{
int x;
int y;
};
program ADD_PROG
{
version ADD_VER
{
int add(numbers)=1;
}=1;
}=100;
-----------------------------sub_server.c------------------------------
#include "sub.h"

int *
add_1_svc(numbers *argp, struct svc_req *rqstp)
{
	static int  result;
/*
	 * insert server code here
	 */
result=argp->x - argp->y;
	return &result;
}
------------------------------------sub_client.c---------------------------
/*
 * This is sample code generated by rpcgen.
 * These are only templates and you can use them
 * as a guideline for developing your own functions.
 */
#include "sub.h"
//changes
void
add_prog_1(char *host,int a,int b)
{
	CLIENT *clnt;
	int  *result_1;
	numbers  add_1_arg;

#ifndef	DEBUG
	clnt = clnt_create (host, ADD_PROG, ADD_VER, "udp");
//changes
add_1_arg.x=a;
add_1_arg.y=b;
	if (clnt == NULL) {
		clnt_pcreateerror (host);
		exit (1);
	}
#endif	/* DEBUG */

	result_1 = add_1(&add_1_arg, clnt);
	if (result_1 == (int *) NULL) {
		clnt_perror (clnt, "call failed");
	}
//changes
else
{
printf("%d",*result_1);
}
#ifndef	DEBUG
	clnt_destroy (clnt);
#endif	 /* DEBUG */
}
int
main (int argc, char *argv[])
{
	char *host;
//changes
	if (argc < 4) {
		printf ("usage: %s para not pass\n", argv[0]);
		exit (1);
	}
	host = argv[1];
//changes
	add_prog_1 (host,atoi(argv[2]),atoi(argv[3]));
exit (0);
}
------------------output---------------------
sudo apt-get install rpcbind
sudo -i service portmap stop
sudo -i rcpbind -i -w
sudo -i portmap start

mgm@lab4-9:~/pp$ gedit sub.x
mgm@lab4-9:~/pp$ rpcgen -a -C sub.x
mgm@lab4-9:~/pp$ make -f Makefile.sub
mgm@lab4-9:~/pp$ sudo ./sub_client localhost 40 20
[sudo] password for mgm: 
20
mgm@lab4-9:~/pp$ sudo ./sub_client localhost 20 40
-20
mgm@lab4-9:~/pp$ ^C


